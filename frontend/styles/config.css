/* ===== Variables ===== */
:root{
  --bg1:#1095c9; --bg2:#174a9e;

  --panel:#f3f8fc; --panel-border: rgba(255,255,255,.2); --panel-shadow: 0 20px 60px rgba(0,0,0,.15);
  --panel-2:#ffffff;
  --ink:#0f172a; --muted:#555;

  --primary:#1095c9; --primary2:#174a9e;
  --btn:#3b82f6; --btn-sec:#6b7280;

  --note-bg: linear-gradient(135deg, rgba(16,149,201,.1), rgba(23,74,158,.1));
  --note-border-left:#1095c9;

  --chip-ok-bg: rgba(40,167,69,.1); --chip-ok-border: rgba(40,167,69,.3); --chip-ok-ink:#28a745;

  --textarea-bg: rgba(255,255,255,.9); --textarea-border:#e1e5e9; --textarea-focus:#1095c9;

  --overlay:#ffffffd9; --overlay-ink:#174a9e;
  --template-bg: rgba(255, 255, 255, 0.8);
  --template-border: rgba(16, 149, 201, 0.2);
  --template-title: #333;
  --template-icon: #1095c9;
  --textarea-border: #e1e5e9;
  --textarea-bg: rgba(255, 255, 255, 0.9);
  --textarea-focus-bg: #fff;
  --textarea-focus-shadow: rgba(16, 149, 201, 0.2);

}

.dark-mode{
  --bg1:#0b1220; --bg2:#0b1220;

  --panel:#111827; --panel-border:#1f2937; --panel-shadow: 0 16px 40px rgba(0,0,0,.35);
  --panel-2:#0b1220;
  --ink:#e5e7eb; --muted:#9ca3af;

  --primary:#2563eb; --primary2:#1e3a8a;
  --btn:#2563eb; --btn-sec:#6b7280;

  --note-bg: linear-gradient(135deg, rgba(37,99,235,.12), rgba(30,58,138,.12));
  --note-border-left:#2563eb;

  --chip-ok-bg: rgba(34,197,94,.12); --chip-ok-border: rgba(34,197,94,.35); --chip-ok-ink:#86efac;

  --textarea-bg:#0b1220; --textarea-border:#334155; --textarea-focus:#2563eb;

  --overlay:#0000008c; --overlay-ink:#93c5fd;
  --template-bg: rgba(17, 24, 39, 0.85);
  --template-border: rgba(96, 165, 250, 0.3);
  --template-title: #e5e7eb;
  --template-icon: #60a5fa;
  --textarea-border: #374151;
  --textarea-bg: rgba(31, 41, 55, 0.9);
  --textarea-focus-bg: #1f2937;
  --textarea-focus-shadow: rgba(96, 165, 250, 0.25);
}

/* ===== Plantillas de correo ===== */
.email-templates-area {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
  margin-bottom: 30px;
}

.template-box {
  background: var(--template-bg);
  border-radius: 12px;
  padding: 25px;
  border: 1px solid var(--template-border);
}

.template-box h4 {
  color: var(--template-title);
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.template-box h4::before {
  content: '\f0e0';
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
  color: var(--template-icon);
  font-size: 16px;
}

textarea {
  width: 100%;
  min-height: 200px;
  border: 2px solid var(--textarea-border);
  border-radius: 8px;
  padding: 15px;
  font-family: inherit;
  font-size: 14px;
  line-height: 1.5;
  resize: vertical;
  transition: 0.3s;
  background: var(--textarea-bg);
  color: var(--template-title);
}

textarea:focus {
  outline: none;
  border-color: var(--template-icon);
  box-shadow: 0 5px 15px var(--textarea-focus-shadow);
  background: var(--textarea-focus-bg);
}

/* ===== Base ===== */
*{ margin:0; padding:0; box-sizing:border-box; }
body{
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(90deg, var(--bg1) 0%, var(--bg2) 73%);
  color: var(--ink);
}

/* Layout principal */
.container{
  max-width:80%; margin:0 auto;
  background: var(--panel); padding:40px 40px 0;
  box-shadow: var(--panel-shadow);
  border:1px solid var(--panel-border);
  border-radius: 15px;
  margin-top: 10px;
  margin-bottom: 10px;
}

/* T√≠tulo */
.container h2{
  text-align:center; margin-bottom:40px; color: var(--ink);
  font-size:1.5rem; font-weight:700; position:relative; display:flex; align-items:center; justify-content:center; gap:15px;
}
.container h2::before{ content:'\f013'; font-family:'Font Awesome 6 Free'; font-weight:900; color: var(--primary); }
.container h2::after{
  content:''; position:absolute; bottom:-15px; left:50%; transform:translateX(-50%);
  width:80px; height:4px; border-radius:2px; background: linear-gradient(90deg, var(--primary), var(--primary2));
}

/* Barra de periodo + bot√≥n */
.period-select-container{ display:flex; align-items:center; gap:10px; margin:0 0 10px 15px; }
#goToMenuButton{ margin-left:auto; }
#period-select{
  appearance:none; background: var(--panel); color: var(--ink); font-size:15px; font-weight:500;
  padding:10px 36px 10px 14px; border:1.5px solid var(--textarea-border); border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.05); transition:.2s; cursor:pointer;
  background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg fill='%23666' height='20' viewBox='0 0 24 24' width='20' xmlns='http://www.w3.org/2000/svg'%3E<path d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat:no-repeat; background-position:right 10px center; background-size:18px;
}
#period-select:hover{ border-color:#aaa; }
#period-select:focus{ outline:none; border-color: var(--primary); box-shadow:0 0 0 3px color-mix(in srgb, var(--primary) 25%, transparent); }

/* Botones */
.action-button{
  padding:10px 18px; border:none; border-radius:5px; font-size:14px; cursor:pointer;
  background-color: var(--btn); color:#fff; transition: .2s; display:inline-flex; gap:8px; align-items:center;
}
.secondary-button{ background-color: var(--btn-sec); }
.action-button:hover{ filter: brightness(1.06); }

/* Secciones */
.config-section{
  background: color-mix(in srgb, var(--panel-2) 90%, transparent);
  border-radius:16px; padding:30px; margin-bottom:30px; border:1px solid var(--panel-border);
}
.config-section h3{
  color: var(--ink); font-size:24px; font-weight:600; margin-bottom:20px;
  display:flex; align-items:center; gap:12px;
}
.config-section h3::before{ font-family:'Font Awesome 6 Free'; font-weight:900; color: var(--primary); font-size:20px; }
.config-section:nth-of-type(2) h3::before{ content:'\f15c'; }
.config-section:nth-of-type(3) h3::before{ content:'\f0e0'; }

.config-section p{
  background: var(--note-bg); padding:15px 20px; border-radius:8px; border-left:4px solid var(--note-border-left);
  font-size:14px; line-height:1.6; color: var(--muted); margin-bottom:25px;
}

/* Archivos procesados */
#processed-files-list{
  background: color-mix(in srgb, var(--primary) 10%, transparent);
  border-radius:12px; padding:20px; border-left:4px solid var(--primary);
  min-height:60px; color: var(--muted);
}
#processed-files-list:empty::before{
  content:'No hay archivos procesados a√∫n'; display:flex; align-items:center; justify-content:center; height:60px; font-style:italic; color: var(--muted);
}
#processed-files-list h3{
  color: var(--ink); font-size:18px; font-weight:600; margin-bottom:15px; display:flex; align-items:center; gap:10px;
}
#processed-files-list h3::before{ content:'\f15c'; font-family:'Font Awesome 6 Free'; font-weight:900; color: var(--primary); font-size:16px; }
.processed-file{
  display:flex; align-items:center; justify-content:space-between;
  background: var(--chip-ok-bg); border:1px solid var(--chip-ok-border) !important;
  border-radius:8px; padding:12px 16px; margin:8px 0; color: var(--chip-ok-ink); font-weight:500;
}
.processed-file:hover{ background: color-mix(in srgb, var(--chip-ok-bg) 60%, #0000); transform: translateX(5px); box-shadow:0 4px 12px color-mix(in srgb, var(--chip-ok-ink) 25%, transparent); }
.processed-file::before{ content:'\f15b'; font-family:'Font Awesome 6 Free'; font-weight:900; margin-right:10px; color: var(--chip-ok-ink); }
.processed-file .file-name{ flex:1 1 auto; min-width:0; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }
.file-actions{ display:flex; gap:8px; }
.file-action-btn{ background:none; border:none; color: var(--muted); cursor:pointer; padding:6px 8px; border-radius:4px; transition:.2s; font-size:14px; }
.file-action-btn:hover{ background: var(--primary2); color: var(--primary); transform:scale(1.08); }

/* Carga de Excel */
.file-upload-area{
  background: color-mix(in srgb, var(--primary2) 10%, transparent);
  border: 2px dashed var(--primary2); border-radius: 16px; padding: 40px; text-align:center; margin-bottom:20px; position:relative; overflow:hidden;
}
.file-upload-area::before{ content:'\f093'; font-family:'Font Awesome 6 Free'; font-weight:900; font-size:48px; color: var(--primary2); display:block; margin-bottom:15px; opacity:.7; }
#excel-file-input{ display:none; }
.upload-button{
  display:inline-block; background: linear-gradient(135deg, var(--primary) 0%, var(--primary2) 100%);
  color:#fff; padding:15px; border-radius:12px; cursor:pointer; font-weight:600; font-size:16px; border:none; transition:.3s; margin-bottom:15px;
}
.upload-button:hover{ transform: translateY(-2px); box-shadow: 0 12px 30px color-mix(in srgb, var(--primary) 35%, transparent); }
#selected-files-text{ display:block; color: var(--ink); font-size:14px; margin-top:10px; }

/* Botones generales */
button{
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary2) 100%);
  color:#fff; border:none; padding:16px 32px; border-radius:12px; font-size:16px; font-weight:600; cursor:pointer; transition:.3s; position:relative; overflow:hidden; margin:10px 5px;
}
button:hover{ box-shadow: 0 12px 30px color-mix(in srgb, var(--primary) 35%, transparent); }
.centered-button{ display:flex; justify-content:center; margin-top:20px; }

/* Textareas */
textarea{
  width:100%; min-height:200px; border:2px solid var(--textarea-border); border-radius:8px; padding:15px;
  font-family:inherit; font-size:14px; line-height:1.5; resize:vertical; transition:.3s; background: var(--textarea-bg); color: var(--ink);
}
textarea:focus{ outline:none; border-color: var(--textarea-focus); box-shadow:0 5px 15px color-mix(in srgb, var(--textarea-focus) 20%, transparent); }

/* Overlay de carga */
.loading-overlay{ position: fixed; inset: 0; background: var(--overlay); display:flex; align-items:center; justify-content:center; z-index:9999; font-size:1.2rem; }
.loading-spinner{ font-size:1.5rem; color: var(--overlay-ink); }

/* ---- T√≠tulo con ayuda ---- */
.section-title-row{
  display:flex;
  align-items:center;
  gap:.5rem;
}

.section-title{ margin:0; }

/* Fila de t√≠tulo */
.section-title-row{ display:flex; align-items:center; gap:.5rem; }
.section-title{ margin:0; }

/* Badge 'i' */
.info-badge{
  --bd:#cbd5e1; --fg:#1f2937; --bg:#fff;
  display:inline-flex;
  justify-content:center; align-items:center;
  width:18px; height:18px;        /* tama√±o peque√±o */
  border:1px solid var(--bd);
  border-radius:50%;              /* c√≠rculo perfecto */
  background:var(--bg); color:var(--fg);
  font-weight:700; font-size:11px; line-height:1;
  padding:0;                      /* sin padding para evitar la ‚Äúp√≠ldora‚Äù */
  cursor:help;
  vertical-align:middle;          /* por si queda fuera del h3 */
}

/* Contenedores no deben recortar el tooltip */
.config-section{ overflow:visible; }

/* Tooltip flotante (lo crea JS en <body>) */
.tooltip-pop{
  position:fixed; z-index:99999;
  max-width:min(520px, 92vw);
  background:#111827; color:#f9fafb;
  padding:.6rem .75rem; border-radius:.5rem;
  box-shadow:0 8px 24px rgba(0,0,0,.18);
  font-size:.9rem; line-height:1.25rem;
  pointer-events:none; opacity:0; transition:opacity .12s ease;
}
.dark-mode .tooltip-pop{ background:#111827; color:#e5e7eb; }
/* Variables y base (por si no estaban) */
.tooltip-pop{
  --tip-bg: #111827;
  --tip-fg: #f9fafb;
  background: var(--tip-bg);
  color: var(--tip-fg);
}

/* Flecha */
.tooltip-pop::after{
  content:"";
  position:absolute;
  width:0; height:0;
  border:6px solid transparent;
}

.tooltip-pop[data-pos="top"]::after{
  top:100%;
  left:50%;
  transform:translateX(-50%);
  border-top-color: var(--tip-bg);
}

.tooltip-pop[data-pos="bottom"]::after{
  bottom:100%;
  left:50%;
  transform:translateX(-50%);
  border-bottom-color: var(--tip-bg);
}

.dark-mode .tooltip-pop{
  --tip-bg:#0f172a; 
  --tip-fg:#e5e7eb;
}

/* ===== Input autoridad - modo claro y oscuro ===== */
.inputo-autoridad {
    width: 250px;
    padding: 6px 12px;
    font-size: 14px;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    color: var(--ink);                /* Texto adaptable */
    background-color: var(--textarea-bg);
    border: 1px solid var(--textarea-border);
    border-radius: 6px;
    outline: none;
    transition: all 0.2s ease-in-out;
    margin-bottom: 15px;
}

.inputo-autoridad:focus {
    border-color: var(--textarea-focus);
    box-shadow: 0 0 0 2px var(--textarea-focus-shadow);
    background-color: var(--textarea-focus-bg);
}

.inputo-autoridad::placeholder {
    color: var(--muted);
    font-style: italic;
}

/* Para textarea: evita redimensionar */
.inputo-autoridad[rows] {
    resize: none;
}

/* ===== Modo oscuro ===== */
.dark-mode .inputo-autoridad {
    color: #e5e7eb;                  /* Texto claro */
    background-color: var(--textarea-bg);
    border: 1px solid var(--textarea-border);
}

.dark-mode .inputo-autoridad:focus {
    border-color: var(--textarea-focus);
    box-shadow: 0 0 0 2px var(--textarea-focus-shadow);
    background-color: var(--textarea-focus-bg);
}

.dark-mode .inputo-autoridad::placeholder {
    color: #9ca3af;                  /* Placeholder m√°s tenue */
}

/* Estilos para el selector de tipo de plantilla */
.template-type-selector {
    background: color-mix(in srgb, var(--panel-2) 90%, transparent);
    border-radius: 16px;
    padding: 25px;
    margin-bottom: 25px;
    border: 1px solid var(--panel-border);
    position: relative;
}

.template-type-selector::before {
    content: '\f0ae';
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    color: var(--primary);
    font-size: 18px;
    position: absolute;
    top: 25px;
    left: 25px;
}

.template-type-selector label {
    display: block;
    color: var(--ink);
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 15px;
    margin-left: 35px; /* Espacio para el √≠cono */
}

#template-type-select {
    width: 100%;
    appearance: none;
    background: var(--textarea-bg);
    color: var(--ink);
    font-size: 15px;
    font-weight: 500;
    padding: 14px 45px 14px 18px;
    border: 2px solid var(--textarea-border);
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,.08);
    transition: all 0.3s ease;
    cursor: pointer;
    font-family: inherit;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg fill='%23666' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'%3E<path d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 20px;
}

#template-type-select:hover {
    border-color: var(--primary);
    box-shadow: 0 5px 15px var(--textarea-focus-shadow);
    transform: translateY(-1px);
}

#template-type-select:focus {
    outline: none;
    border-color: var(--textarea-focus);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 25%, transparent);
    background: var(--textarea-focus-bg);
}

#template-type-select option {
    background: var(--panel-2);
    color: var(--ink);
    padding: 14px 20px;
    font-size: 14px;
    font-weight: 500;
    border: none;
    border-bottom: 1px solid var(--textarea-border);
    transition: all 0.2s ease;
    line-height: 1.4;
}

#template-type-select option:last-child {
    border-bottom: none;
}

#template-type-select option:hover {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary2) 100%);
    color: white;
    transform: translateX(5px);
    box-shadow: inset 4px 0 0 rgba(255,255,255,0.3);
}

#template-type-select option:checked,
#template-type-select option:selected {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary2) 100%);
    color: white;
    font-weight: 600;
    box-shadow: inset 4px 0 0 rgba(255,255,255,0.4);
}

/* Estilos espec√≠ficos para cada opci√≥n con √≠conos */
#template-type-select option[value="seguimiento"]::before {
    content: "üìä ";
    margin-right: 8px;
}

#template-type-select option[value="nee"]::before {
    content: "üéØ ";
    margin-right: 8px;
}

#template-type-select option[value="tercera_matricula"]::before {
    content: "‚ö†Ô∏è ";
    margin-right: 8px;
}

#template-type-select option[value="parcial"]::before {
    content: "üìù ";
    margin-right: 8px;
}

#template-type-select option[value="final"]::before {
    content: "üéì ";
    margin-right: 8px;
}

/* Estilos adicionales para el dropdown en diferentes navegadores */
#template-type-select {
    /* Mejoras adicionales para el dropdown */
    background-color: var(--textarea-bg);
    border: 2px solid var(--textarea-border);
}

#template-type-select::-webkit-scrollbar {
    width: 8px;
}

#template-type-select::-webkit-scrollbar-track {
    background: var(--panel);
    border-radius: 4px;
}

#template-type-select::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary2) 100%);
    border-radius: 4px;
}

#template-type-select::-webkit-scrollbar-thumb:hover {
    background: var(--primary2);
}

/* Estilos para Firefox */
#template-type-select {
    scrollbar-width: thin;
    scrollbar-color: var(--primary) var(--panel);
}

/* Animaci√≥n al abrir el dropdown */
#template-type-select:focus option {
    animation: slideIn 0.15s ease-out;
}


/* Responsive */
@media (max-width: 768px){
  .container{ padding:25px; }
  .config-section{ padding:20px; }
  .email-templates-area{ grid-template-columns:1fr; }
  .file-upload-area{ padding:25px; }
  button{ padding:14px 24px; font-size:14px; }
}
@media (max-width: 480px){
  .container{ margin:5px; padding:20px; }
  .container h2{ font-size:22px; flex-direction:column; gap:10px; }
  .config-section h3{ font-size:20px; flex-direction:column; align-items:flex-start; gap:8px; }
  textarea{ min-height:150px; font-size:13px; }
  .period-select-container{ flex-wrap:wrap; }
  #goToMenuButton{ margin-left:0; margin-top:8px; }
}